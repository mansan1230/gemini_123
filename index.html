<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI è²¡ç¶“æƒ…å ±ç«™</title>
    <style>
        body { font-family: "Segoe UI", sans-serif; background-color: #f4f4f9; color: #333; max-width: 1200px; margin: 0 auto; padding: 20px; }
        h1 { text-align: center; color: #2c3e50; margin-bottom: 10px; }
        .update-time { text-align: center; color: #7f8c8d; margin-bottom: 20px; font-size: 0.9em; }
        
        /* === æ–°å¢ï¼šå¸‚å ´è¡Œæƒ…åˆ— === */
        .market-bar { display: flex; gap: 15px; margin-bottom: 30px; overflow-x: auto; padding-bottom: 5px; justify-content: center; }
        .market-item { 
            background: white; padding: 10px 15px; border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); min-width: 120px; text-align: center; 
            border-top: 3px solid #ddd;
        }
        .market-name { font-size: 0.85em; color: #666; font-weight: bold; margin-bottom: 5px; display: block; }
        .market-price { font-size: 1.1em; font-weight: bold; }
        .market-change { font-size: 0.9em; margin-left: 5px; }
        
        /* æ¼²è·Œé¡è‰² */
        .up { color: #27ae60; border-top-color: #27ae60; } /* ç¶ æ¼² */
        .down { color: #c0392b; border-top-color: #c0392b; } /* ç´…è·Œ */

        /* ä½ˆå±€å®¹å™¨ */
        .container { display: flex; gap: 20px; flex-wrap: wrap; }
        .news-section { flex: 2; min-width: 300px; }
        .data-section { flex: 1; min-width: 250px; }

        /* æ–°èå¡ç‰‡ */
        .card { background: white; padding: 20px; margin-bottom: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-left: 5px solid #bdc3c7; transition: transform 0.2s; }
        .card:hover { transform: translateY(-2px); }
        .card.score-high { border-left-color: #e74c3c; } 
        .card.score-med { border-left-color: #f1c40f; }  
        
        .category-tag { background: #ecf0f1; padding: 3px 8px; border-radius: 4px; font-size: 0.8em; color: #555; font-weight: bold; }
        .impact-tag { float: right; font-weight: bold; font-size: 0.9em; color: #7f8c8d; }
        
        h3 { margin: 10px 0 5px; }
        p { line-height: 1.6; color: #555; font-size: 0.95em; }
        a { text-decoration: none; color: #3498db; font-weight: bold; font-size: 0.9em; }

        /* è¡¨æ ¼ */
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        th { background: #2c3e50; color: white; padding: 10px; text-align: left; font-size: 0.9em; }
        td { padding: 10px; border-bottom: 1px solid #eee; font-size: 0.85em; }
        .num { font-family: monospace; font-weight: bold; }
    </style>
</head>
<body>

    <h1>ğŸš€ AI æ¯æ—¥è²¡ç¶“æƒ…å ±</h1>
    <p id="update-time" class="update-time">è³‡æ–™è®€å–ä¸­...</p>

    <div id="market-bar" class="market-bar">
        </div>

    <div class="container">
        <div class="news-section" id="news-box"></div>

        <div class="data-section">
            <div style="background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                <h3 style="margin-top:0">ğŸ“… æœªä¾†ä¸€é€±é‡è¦æ•¸æ“š (US)</h3>
                <table id="calendar-table">
                    <thead>
                        <tr><th>äº‹ä»¶</th><th>å‰å€¼</th><th>é æ¸¬</th></tr>
                    </thead>
                    <tbody id="calendar-box"></tbody>
                </table>
                <p id="no-data-msg" style="display:none; text-align:center; color:#999; font-size:0.8em; padding:10px;">æš«ç„¡æ•¸æ“š</p>
            </div>
        </div>
    </div>

    <script>
        // åŠ å…¥æ™‚é–“æˆ³è¨˜é¿å…ç·©å­˜
        fetch('daily_news.json?t=' + new Date().getTime())
            .then(r => r.json())
            .then(data => {
                // æ›´æ–°æ™‚é–“
                document.getElementById('update-time').textContent = "æœ€å¾Œæ›´æ–°: " + (data.update_time || "--");

                // ================= Render 1: å¸‚å ´è¡Œæƒ… =================
                const marketBox = document.getElementById('market-bar');
                if (data.market && data.market.length > 0) {
                    data.market.forEach(item => {
                        // åˆ¤æ–·æ¼²è·Œé¡è‰² (Green up, Red down)
                        const isUp = item.change >= 0;
                        const colorClass = isUp ? 'up' : 'down';
                        const sign = isUp ? '+' : '';
                        
                        marketBox.innerHTML += `
                            <div class="market-item ${colorClass}">
                                <span class="market-name">${item.name}</span>
                                <span class="market-price">${item.price.toFixed(2)}</span><br>
                                <span class="market-change">${sign}${item.percent.toFixed(2)}%</span>
                            </div>
                        `;
                    });
                } else {
                    marketBox.style.display = 'none';
                }

                // ================= Render 2: æ–°è =================
                const newsBox = document.getElementById('news-box');
                if (data.news && data.news.length > 0) {
                    data.news.forEach(item => {
                        let scoreClass = item.score >= 8 ? 'score-high' : (item.score >= 5 ? 'score-med' : '');
                        newsBox.innerHTML += `
                            <div class="card ${scoreClass}">
                                <div>
                                    <span class="category-tag">${item.category}</span>
                                    <span class="impact-tag">${item.impact} (${item.score})</span>
                                </div>
                                <h3>${item.title}</h3>
                                <p>${item.summary}</p>
                                <a href="${item.link}" target="_blank">é–±è®€åŸæ–‡ â†’</a>
                            </div>
                        `;
                    });
                } else {
                    newsBox.innerHTML = "<p>æš«ç„¡æ–°èã€‚</p>";
                }

                // ================= Render 3: æ—¥æ›† =================
                const calBox = document.getElementById('calendar-box');
                if (data.calendar && data.calendar.length > 0) {
                    data.calendar.forEach(item => {
                        calBox.innerHTML += `
                            <tr>
                                <td>${item.event}</td>
                                <td class="num">${item.prev}</td>
                                <td class="num" style="color:#e67e22">${item.estimate}</td>
                            </tr>
                        `;
                    });
                } else {
                     document.getElementById('calendar-table').style.display = 'none';
                     document.getElementById('no-data-msg').style.display = 'block';
                }
            })
            .catch(e => console.error("Error:", e));
    </script>
</body>
</html>
